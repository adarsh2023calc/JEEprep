<!DOCTYPE html>
<html>
<head>
    <title>Online Judge</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs/loader.min.js"></script>
</head>
<body>

<h2>Code Editor (LeetCode Style)</h2>

<div id="editor" style="height: 400px; border: 1px solid #ccc;"></div>
<button onclick="run()">Run Code</button>

<pre id="output"></pre>

<script>
require.config({ paths: { "vs": "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs" }});

require(["vs/editor/editor.main"], function () {
    window.editor = monaco.editor.create(document.getElementById('editor'), {
        value: `print("Hello from Django Judge!")`,
        language: "python",
        theme: "vs-dark"
    });
});

async function run() {
    const code = editor.getValue();

    const response = await fetch("/api/run/", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ code: code, language: "python" })
    });

    const data = await response.json();
    document.getElementById("output").innerText = data.output;
}
</script>

</body>
</html>
